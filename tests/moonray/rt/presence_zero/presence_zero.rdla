sceneVars = SceneVariables {
    ["lights visible in camera"] = true,
    ["pixel samples"] = 4,
    ["max depth"] = 5,
    ["light samples"] = 1,
    ["bsdf samples"] = 1,
    ["image width"] = 256,
    ["image height"] = 256,
    ["enable presence shadows"] = true,
}

shotCam = Camera("/Scene/rendering/shot_cam") {
    ["node xform"] = rotate(-180, 0, 1, 0) * translate(-50, 50, -146),
    ["focal"] = 35,
    ["film width aperture"] = 24,
}

RectLight("/Scene/lighting/rect") {
    ["node xform"] = rotate(-90, 1, 0, 0) * scale(32.8, 32.8, 32.8) * translate(-50, 99.2, 45),
    ["exposure"] = 5.6,
    ["normalized"] = false,
    ["width"] = 0.8,
    ["height"] = 0.8,
    ["presence shadows"] = 1,
}

lightSet = LightSet("LightSetA") {
    RectLight("/Scene/lighting/rect"),
}

-- Geometry --

geoms = {}

local planeBack = UsdGeometry("/Scene/geometry/back") {
    ["node xform"] = rotate(-90, 0, 0, 1) * rotate(90, 0, 1, 0) * scale(100, 100, 100) * translate(-50, 50, 100),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeBack)

local planeBottom = UsdGeometry("/Scene/geometry/bottom") {
    ["node_xform"] = scale(100, 100, 100) * translate(-50, 0, 50),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeBottom)

local planeTop = UsdGeometry("/Scene/geometry/top") {
    ["node xform"] = rotate(-180, 0, 0, 1) * scale(100, 100, 100) * translate(-50, 100, 50),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeTop)

local planeLeft = UsdGeometry("/Scene/geometry/left") {
    ["node xform"] = rotate(90, 0, 0, 1) * scale(100, 100, 100) * translate(0, 50, 50),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeLeft)

local planeRight = UsdGeometry("/Scene/geometry/right") {
    ["node xform"] = rotate(-90, 0, 0, 1) * scale(100, 100, 100) * translate(-100, 50, 50),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeRight)

local frontPlane = UsdGeometry("/Scene/geometry/front_plane") {
    ["node xform"] = rotate(-90, 0, 0, 1) * rotate(90, 0, 1, 0) * scale(50, 50, 50) * translate(-50, 50, 20),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, frontPlane)

local backPlane = UsdGeometry("/Scene/geometry/back_plane") {
    ["node xform"] = rotate(-90, 0, 0, 1) * rotate(90, 0, 1, 0) * scale(50, 50, 50) * translate(-50, 50, 80),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, backPlane)

GeometrySet("Scene/geometrySet")(geoms)

-- Materials --

local whiteMtl = DwaSolidDielectricMaterial("/Scene/surfacing/material/white") {
    ["albedo"] = Rgb(0.6, 0.55, 0.4),
}

local leftMtl = DwaSolidDielectricMaterial("/Scene/surfacing/material/left") {
    ["albedo"] = Rgb(0.7, 0.1, 0.08),
}

local rightMtl = DwaSolidDielectricMaterial("/Scene/surfacing/material/right") {
    ["albedo"] = Rgb(0.2, 0.4, 0.7),
}

local transparentMtl = DwaSolidDielectricMaterial("/Scene/surfacing/material/transparent") {
    ["albedo"] = Rgb(0.8, 0.8, 0.8),
    ["presence"] = 0.0,
}

-- Layer --

Layer("Scene/layer") {
    {planeBack, "", whiteMtl, lightSet},
    {planeBottom, "", whiteMtl, lightSet},
    {planeTop, "", whiteMtl, lightSet},
    {planeLeft, "", leftMtl, lightSet},
    {planeRight, "", rightMtl, lightSet},
    {frontPlane, "", transparentMtl, lightSet},
    {backPlane, "", transparentMtl, lightSet}
}

