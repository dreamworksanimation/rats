SceneVariables {
    ["pixel_samples"] = 8,
    ["image_width"] = 256,
    ["image_height"] = 256,
}

Camera("cam") {
    ["node_xform"] = translate(0, 1, 54),
    ["focal"] = 50,
}

lightSet = LightSet("lights") {
}

-------------------------------------------------------

geoms = {}
assignments = {}

local geom0 = UsdGeometry("geom0") {
    ["stage"] = rats_assets_dir.."/models/MoonRayWidget.usdc",
    ["prim_path"] = "/widget",
    ["node_xform"] = translate(-6, 4, 0) * rotate(20, 1, 0, 0),
}
local geom1 = UsdGeometry("geom1") {
    ["stage"] = rats_assets_dir.."/models/MoonRayWidget.usdc",
    ["prim_path"] = "/widget",
    ["node_xform"] = translate(6, 4, 0) * rotate(20, 1, 0, 0),
}
local geom2 = UsdGeometry("geom2") {
    ["stage"] = rats_assets_dir.."/models/MoonRayWidget.usdc",
    ["prim_path"] = "/widget",
    ["node_xform"] = translate(-6, -6, 3) * rotate(10, 1, 0, 0),
}
local geom3 = UsdGeometry("geom3") {
    ["stage"] = rats_assets_dir.."/models/MoonRayWidget.usdc",
    ["prim_path"] = "/widget",
    ["node_xform"] = translate(6, -6, 3) * rotate(10, 1, 0, 0),
}
table.insert(geoms, geom0)
table.insert(geoms, geom1)
table.insert(geoms, geom2)
table.insert(geoms, geom3)

local ref = BoxGeometry("box") {
    ["node_xform"] = translate(2, 10, 9),
}
table.insert(geoms, ref)





local directional0 = DirectionalMap("directional0") {
    ["prime_direction"] = 2,    -- "axis of object"
    ["polarity"] = 0,
    ["color_a"] = Rgb(1,0,0),
    ["color_b"] = Rgb(0,1,0),
    ["object_axis"] = 0,
    ["bias"] = 0.1,
}

local directional1 = DirectionalMap("directional1") {
    ["prime_direction"] = 3,    -- "look-at object"
    ["polarity"] = 0,
    ["color_a"] = Rgb(1,0,0),
    ["color_b"] = Rgb(0,1,0),
    ["object"] = ref,
    ["bias"] = 0.1,
}

local directional2 = DirectionalMap("directional2") {
    ["prime_direction"] = 0,    -- "observer direction"
    ["polarity"] = 0,
    ["color_a"] = Rgb(1,0,0),
    ["color_b"] = Rgb(0,1,0),
    ["bias"] = 0.1,
}

local directional3 = DirectionalMap("directional3") {
    ["prime_direction"] = 1,    -- "custom direction"
    ["polarity"] = 0,
    ["color_a"] = Rgb(1,0,0),
    ["color_b"] = Rgb(0,1,0),
    ["custom_direction"] = Vec3(1,1,1),
    ["bias"] = 0.1,
}




local mtl0 = DwaSolidDielectricMaterial("mtl0") {
    ["show_diffuse"] = false,
    ["show_specular"] = false,
    ["show_emission"] = true,
    ["emission"] = bind(directional0, Rgb(1,1,1)),
}

local mtl1 = DwaSolidDielectricMaterial("mtl1") {
    ["show_diffuse"] = false,
    ["show_specular"] = false,
    ["show_emission"] = true,
    ["emission"] = bind(directional1, Rgb(1,1,1)),
}

local mtl2 = DwaSolidDielectricMaterial("mtl2") {
    ["show_diffuse"] = false,
    ["show_specular"] = false,
    ["show_emission"] = true,
    ["emission"] = bind(directional2, Rgb(1,1,1)),
}

local mtl3 = DwaSolidDielectricMaterial("mtl3") {
    ["show_diffuse"] = false,
    ["show_specular"] = false,
    ["show_emission"] = true,
    ["emission"] = bind(directional3, Rgb(1,1,1)),
}





local white = DwaSolidDielectricMaterial("white") {
    ["show_diffuse"] = false,
    ["show_specular"] = false,
    ["show_emission"] = true,
    ["emission"] = Rgb(1,1,1),
}




table.insert(assignments, {geom0, "", mtl0, lightSet})
table.insert(assignments, {geom1, "", mtl1, lightSet})
table.insert(assignments, {geom2, "", mtl2, lightSet})
table.insert(assignments, {geom3, "", mtl3, lightSet})
table.insert(assignments, {ref, "", white, lightSet})

GeometrySet("geometry")(geoms)
Layer("layer")(assignments)

