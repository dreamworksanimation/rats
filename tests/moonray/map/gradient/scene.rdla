rats_assets_dir = os.getenv("RATS_ASSETS_DIR")

SceneVariables {
    ["pixel_samples"] = 1,
    ["light_samples"] = 0,
    ["max_depth"] = 0,
    ["image_width"] = 256,
    ["image_height"] = 256,
}

Camera("/Scene/rendering/camera") {
    ["node_xform"] = Mat4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, -8, 90, 1),
    ["near"] = 0.01,
    ["far"] = 100,
}


-- Geometry --

----- TOP SQUARE -------
local geom1 = UsdGeometry("/Scene/geometry/geom1") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(0.0, 1.15, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom2 = UsdGeometry("/Scene/geometry/geom2") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(0.0, 0.0, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom3 = UsdGeometry("/Scene/geometry/geom3") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(0.0, -1.15, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom4 = UsdGeometry("/Scene/geometry/geom4") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(-1.15, 1.15, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom5 = UsdGeometry("/Scene/geometry/geom5") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(-1.15, 0.0, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom6 = UsdGeometry("/Scene/geometry/geom6") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(-1.15, -1.15, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom7 = UsdGeometry("/Scene/geometry/geom7") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(1.15, 1.15, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

----- BOTTOM ROW -------

local geom8 = UsdGeometry("/Scene/geometry/geom8") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(-2.8, -2.8, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom9 = UsdGeometry("/Scene/geometry/geom9") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(-1.7, -2.8, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom10 = UsdGeometry("/Scene/geometry/geom10") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(-0.6, -2.8, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom11 = UsdGeometry("/Scene/geometry/geom11") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(0.5, -2.8, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom12 = UsdGeometry("/Scene/geometry/geom12") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(1.6, -2.8, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}

local geom13 = UsdGeometry("/Scene/geometry/geom13") {
    ["node_xform"] = rotate(90, 1, 0, 0) * translate(2.7, -2.8, 0.0) * scale(10.0, 10.0, 10.0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}


GeometrySet("geometryset") {
    geom1,
    geom2,
    geom3,
    geom4,
    geom5,
    geom6,
    geom7,
    geom8,
    geom9,
    geom10,
    geom11,
    geom12,
    geom13,
}


-- Materials --

----- TOP SQUARE -------
local startEndMap = GradientMap("/Scene/surfacing/startEndMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, 0.0),
    ["end"] = Vec3(1.0, 1.0, 0.0),
    ["falloff_start"] = 0.4,
    ["falloff_end"] = 0.6,
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 6,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
}

local startEndMat = DwaEmissiveMaterial("/Scene/surfacing/startEndMat") {
    ["emission"] = bind(startEndMap),
}

local exponentMap = GradientMap("/Scene/surfacing/exponentMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, 0.0),
    ["end"] = Vec3(1.0, 1.0, 0.0),
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 6,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
    ["falloff_exponent"] = 2.0,
}

local exponentMat = DwaEmissiveMaterial("/Scene/surfacing/exponentMat") {
    ["emission"] = bind(exponentMap),
}

local endIntensityMap = GradientMap("/Scene/surfacing/endIntensityMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, 0.0),
    ["end"] = Vec3(1.0, 1.0, 0.0),
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 6,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
    ["falloff_end_intensity"] = 0.5,
}

local endIntensityMat = DwaEmissiveMaterial("/Scene/surfacing/endIntensityMat") {
    ["emission"] = bind(endIntensityMap),
}

local biasMap = GradientMap("/Scene/surfacing/biasMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, 0.0),
    ["end"] = Vec3(1.0, 1.0, 0.0),
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 6,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
    ["falloff_bias"] = 0.25,
}

local biasMat = DwaEmissiveMaterial("/Scene/surfacing/biasMat") {
    ["emission"] = bind(biasMap),
}

local symmetricMap = GradientMap("/Scene/surfacing/symmetricMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, 0.0),
    ["end"] = Vec3(1.0, 1.0, 0.0),
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 6,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
    ["symmetric"] = true,
}

local symmetricMat = DwaEmissiveMaterial("/Scene/surfacing/symmetricMat") {
    ["emission"] = bind(symmetricMap),
}

local symmetricCenterMap = GradientMap("/Scene/surfacing/symmetricCenterMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, 0.0),
    ["end"] = Vec3(1.0, 1.0, 0.0),
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 6,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
    ["symmetric"] = true,
    ["symmetric_center"] = 0.8,
}

local symmetricCenterMat = DwaEmissiveMaterial("/Scene/surfacing/symmetricCenterMat") {
    ["emission"] = bind(symmetricCenterMap),
}

local allMap = GradientMap("/Scene/surfacing/allMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, 0.0),
    ["end"] = Vec3(1.0, 1.0, 0.0),
    ["falloff_start"] = 0.4,
    ["falloff_end"] = 0.6,
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 6,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
    ["falloff_exponent"] = 2,
    ["falloff_bias"] = 0.25,
    ["symmetric"] = true,
    ["symmetric_center"] = 0.8,
    ["falloff_end_intensity"] = 0.5,
}

local allMat = DwaEmissiveMaterial("/Scene/surfacing/allMat") {
    ["emission"] = bind(allMap),
}

------- BOTTOM ROW ----------
local noneMap = GradientMap("/Scene/surfacing/noneMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, -1.0),
    ["end"] = Vec3(0.0, 0.0, 1.0),
    ["falloff_type"] = 0, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 4,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
}

local noneMat = DwaEmissiveMaterial("/Scene/surfacing/noneMat") {
    ["emission"] = bind(noneMap),
}

local naturalMap = GradientMap("/Scene/surfacing/naturalMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, -1.0),
    ["end"] = Vec3(0.0, 0.0, 1.0),
    ["falloff_type"] = 1, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 4,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
}

local naturalMat = DwaEmissiveMaterial("/Scene/surfacing/naturalMat") {
    ["emission"] = bind(naturalMap),
}

local linearMap = GradientMap("/Scene/surfacing/linearMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, -1.0),
    ["end"] = Vec3(0.0, 0.0, 1.0),
    ["falloff_type"] = 2, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 4,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
}

local linearMat = DwaEmissiveMaterial("/Scene/surfacing/linearMat") {
    ["emission"] = bind(linearMap),
}

local squaredMap = GradientMap("/Scene/surfacing/squaredMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, -1.0),
    ["end"] = Vec3(0.0, 0.0, 1.0),
    ["falloff_type"] = 3, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 4,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
}

local squaredMat = DwaEmissiveMaterial("/Scene/surfacing/squaredMat") {
    ["emission"] = bind(squaredMap),
}

local gaussianMap = GradientMap("/Scene/surfacing/gaussianMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, -1.0),
    ["end"] = Vec3(0.0, 0.0, 1.0),
    ["falloff_type"] = 4, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 4,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
}

local gaussianMat = DwaEmissiveMaterial("/Scene/surfacing/gaussianMat") {
    ["emission"] = bind(gaussianMap),
}

local easeOutMap = GradientMap("/Scene/surfacing/easeOutMap") {
    ["color_A"] = Rgb(0.1, 0.0, 1.0),
    ["color_B"] = Rgb(1.0, 0.1, 0.1),
    ["start"] = Vec3(0.0, 0.0, -1.0),
    ["end"] = Vec3(0.0, 0.0, 1.0),
    ["falloff_type"] = 5, -- 0 NONE, 1 NATURAL, 2 LINEAR, 3 SQUARED, 4 GAUSSIAN, 5 EASE_OUT 
    ["space"] = 4,   -- 0 RENDER, 1 CAMERA, 2 WORLD, 3 SCREEN, 4 OBJECT, 5 REFERENCE, 6 TEXTURE 
}

local easeOutMat = DwaEmissiveMaterial("/Scene/surfacing/easeOutMat") {
    ["emission"] = bind(easeOutMap),
}

local ls = LightSet("light_set")

Layer("/Scene/layer") {
    {geom1, "", startEndMat, ls},
    {geom2, "", exponentMat, ls},
    {geom3, "", endIntensityMat, ls},
    {geom4, "", biasMat, ls},
    {geom5, "", symmetricMat, ls},
    {geom6, "", symmetricCenterMat, ls},
    {geom7, "", allMat, ls},
    {geom8, "", noneMat, ls},
    {geom9, "", naturalMat, ls},
    {geom10, "", linearMat, ls},
    {geom11, "", squaredMat, ls},
    {geom12, "", gaussianMat, ls},
    {geom13, "", easeOutMat, ls},
}
