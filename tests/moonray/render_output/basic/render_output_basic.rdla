SceneVariables {
    ["image_width"] = 256,
    ["image_height"] = 256,
    ["pixel_samples"] = 6,
    ["light_samples"] = 1,
    ["bsdf_samples"] = 1,
}

Camera("/camera") {
    ["node_xform"] = translate(0, 3.25, 15) * rotate(-20, 1, 0, 0) * rotate(-30, 0, 1, 0),
}

--------------------------------------------------------------

EnvLight("/envlight") {
    ["intensity"] = 0.6,
    ["texture"] = rats_assets_dir .. "/hdri/parkinglot_dusk.exr"
}

lightset = LightSet("/lightset") {
    EnvLight("/envlight"),
}

--------------------------------------------------------------

widget = UsdGeometry("/widget") {
    ["stage"] = rats_assets_dir .. "/models/MoonRayWidget.usdc",
    ["prim_path"] = "/widget"
}

GeometrySet("/geometrySet") {
    widget,
}

--------------------------------------------------------------

mtl = DwaBaseMaterial("/baseMaterial") {}

Layer("/layer") {
    {widget, "", mtl, lightset},
}

--------------------------------------------------------------

-- build a reasonably standard default RGBAZ result
RenderOutput("/output/result0/rgb") {
   ["file_name"] = "result0.exr",
}

RenderOutput("/output/result0/alpha") {
   ["file_name"] = "result0.exr",
   ["result"] = 1 -- alpha
}

RenderOutput("/output/result0/depth") {
   ["file_name"] = "result0.exr",
   ["result"] = 2, -- depth
   ["channel_format"] = 0 -- 32 bit float
}

-- test sub-images, non-default channel names, and compression
RenderOutput("/output/result1/depth") {
   ["file_name"] = "result1.exr",
   ["file_part"] = "depth",
   ["result"] = 2, -- depth
   ["channel_name"] = "Depth",
   ["compression"] = 2 -- rle
}

RenderOutput("/output/result1/alpha") {
   ["file_name"] = "result1.exr",
   ["file_part"] = "alpha",
   ["result"] = 1, -- alpha
   ["channel_name"] = "Alpha",
   ["compression"] = 4 -- piz
}

RenderOutput("/output/result1/rgb") {
   ["file_name"] = "result1.exr",
   ["file_part"] = "rgb",
   ["result"] = 0, -- beauty
   ["channel_name"] = "Beauty",
   ["compression"] = 5 -- pxr24
}
