sceneVars = SceneVariables {
    ["lights visible in camera"] = true,
    ["pixel samples"] = 2,
    ["max depth"] = 0,
    ["light samples"] = 1,
    ["bsdf samples"] = 1,
    ["image width"] = 256,
    ["image height"] = 256,
    ["enable presence shadows"] = true,
    ["deep_id_attribute_names"] = {"id0"},
}

local id0 = UserData("id0") {
    ["float key"] = "id0",
}

ROOM_WIDTH=5
ROOM_HEIGHT=5
ROOM_DEPTH=5

local id0 = UserData("id0") {
    ["float key"] = "id0",
    ["float values"] = {0.1, 0.2, 0.3, 0.4, 0.5, 0.6},
}

shotCam = Camera("/Scene/rendering/shot_cam") {
    ["node xform"] = translate(0, 0, ROOM_DEPTH),
    ["focal"] = 20,
}

geoms = {}
assignments = {}

rectLight = RectLight("/Scene/lighting/rect") {
    ["node xform"] = rotate(-90, 1, 0, 0) * translate(0, ROOM_HEIGHT/2, 0),
    ["on"] = true,
    ["color"] = Rgb(1, 1, 1),
    ["intensity"] = 1,
    ["exposure"] = 5.6,
    ["normalized"] = false,
    ["width"] = 0.8,
    ["height"] = 0.8,
    ["presence shadows"] = 1,
}

lightSet = LightSet("LightSetA") {
    rectLight
}

-- Geometry --
local planeBack = UsdGeometry("/Scene/geometry/back") {
    ["node xform"] = rotate(90, 1, 0, 0) * scale(ROOM_WIDTH, ROOM_HEIGHT, ROOM_DEPTH) * translate(0, 0, -ROOM_DEPTH/2),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeBack)

local planeBottom = UsdGeometry("/Scene/geometry/bottom") {
    ["node xform"] = scale(ROOM_WIDTH, ROOM_HEIGHT, ROOM_DEPTH) * translate(0, -ROOM_HEIGHT/2, 0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeBottom)

local planeTop = UsdGeometry("/Scene/geometry/top") {
    ["node xform"] = scale(ROOM_WIDTH, ROOM_HEIGHT, ROOM_DEPTH) * translate(0, ROOM_HEIGHT/2, 0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeTop)

local planeLeft = UsdGeometry("/Scene/geometry/left") {
    ["node xform"] = rotate(90, 0, 0, 1) * scale(ROOM_WIDTH, ROOM_HEIGHT, ROOM_DEPTH) * translate(ROOM_WIDTH/2, 0, 0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeLeft)

local planeRight = UsdGeometry("/Scene/geometry/right") {
    ["node xform"] = rotate(-90, 0, 0, 1) * scale(ROOM_WIDTH, ROOM_HEIGHT, ROOM_DEPTH) * translate(-ROOM_WIDTH/2, 0, 0),
    ["stage"] = rats_assets_dir.."/models/plane.usdc",
    ["prim_path"] = "/plane",
}
table.insert(geoms, planeRight)

-- Materials --

local whiteMtl = DwaBaseMaterial("/Scene/surfacing/material/white") {
    ["albedo"] = Rgb(0.6, 0.55, 0.4),
}

local leftMtl = DwaBaseMaterial("/Scene/surfacing/material/left") {
    ["albedo"] = Rgb(0.7, 0.1, 0.08),
}

local rightMtl = DwaBaseMaterial("/Scene/surfacing/material/right") {
    ["albedo"] = Rgb(0.2, 0.4, 0.7),
}

table.insert(assignments, {planeBack, "", whiteMtl, lightSet})
table.insert(assignments, {planeBottom, "", whiteMtl, lightSet})
table.insert(assignments, {planeTop, "", whiteMtl, lightSet})
table.insert(assignments, {planeLeft, "", leftMtl, lightSet})
table.insert(assignments, {planeRight, "", rightMtl, lightSet})

RenderOutput("cryptomatte") {
    ["result"] = "cryptomatte",
    ["file_name"] = "cryptomatte.exr",
}

RenderOutput("dummy0") {
    ["file_name"] = "ignore_this_file.exr",
    ["primitive_attribute"] = "id0",
    ["result"] = "primitive attribute",
}