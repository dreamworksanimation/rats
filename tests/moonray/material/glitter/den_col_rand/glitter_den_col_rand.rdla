SceneVariables {
    ["pixel_samples"] = 2,
    ["max_depth"] = 1,
    ["image_width"] = 420,
    ["image_height"] = 280,
}

local camera = Camera("/Scene/rendering/camera") {
    ["node_xform"] = translate(0, 0, 9),
}

-------------------------- Lights --------------------------------

env = EnvLight("/Scene/lighting/env") {
    ["node_xform"] = rotate(70, 0, 1, 0),
    ["sample_upper_hemisphere_only"] = false,
    ["texture"] = rats_assets_dir .. "/hdri/parkinglot_dusk.exr",
}

lightset = LightSet("LightSetA") { env }

---------------------- Geometry --------------------------

sphere_topleft = SphereGeometry("/Scene/geometry/sphere_topleft") {
    ["node_xform"] = translate(-2.5, 1.2, 0),
}

sphere_bottomleft = SphereGeometry("/Scene/geometry/sphere_bottomleft") {
    ["node_xform"] = translate(-2.5, -1.2, 0),
}

sphere_topcenter = SphereGeometry("/Scene/geometry/sphere_topcenter") {
    ["node_xform"] = translate(0.0, 1.2, 0),
}

sphere_bottomcenter = SphereGeometry("/Scene/geometry/sphere_bottomcenter") {
    ["node_xform"] = translate(0.0, -1.2, 0),
}

sphere_topright = SphereGeometry("/Scene/geometry/sphere_topright") {
    ["node_xform"] = translate(2.5, 1.2, 0),
}

sphere_bottomright = SphereGeometry("/Scene/geometry/sphere_bottomright") {
    ["node_xform"] = translate(2.5, -1.2, 0),
}

GeometrySet("geometryset") {
    sphere_topleft,
    sphere_topcenter,
    sphere_topright,
    sphere_bottomleft,
    sphere_bottomcenter,
    sphere_bottomright
}

------------------------- Materials ----------------------------

local flakeRandomness = 0.5;
local flakeDensity = 31.6228;

-- Density 100
topleft_mtl = DwaBaseMaterial("/Scene/surfacing/topleft_mtl") {
    ["glitter_color_A"] = Rgb(0.55, 0.55, 0.55),
    ["glitter_density"] = 10,
    ["glitter_randomness"] = flakeRandomness,
    ["glitter_roughness_A"] = 0.1,
    ["glitter_size_A"] = 1.0/10,
    ["glitter_space"] = 4,
    ["show_specular"] = false,
    ["show_glitter"] = true,
    ["show_diffuse"] = false,
}

-- Color Copper(ish) - no variation
bottomleft_mtl = DwaBaseMaterial("/Scene/surfacing/bottomleft_mtl") {
    ["glitter_color_A"] = Rgb(0.55, 0.15, 0.05),
    ["glitter_density"] = flakeDensity,
    ["glitter_randomness"] = flakeRandomness,
    ["glitter_roughness_A"] = 0.1,
    ["glitter_size_A"] = 1.0/flakeDensity,
    ["glitter_space"] = 4,
    ["show_specular"] = false,
    ["show_glitter"] = true,
    ["show_diffuse"] = false,
}
----------------------------------------------------------------------

-- Density 10^4
topcenter_mtl = DwaBaseMaterial("/Scene/surfacing/topcenter_mtl") {
    ["glitter_color_A"] = Rgb(0.55, 0.55, 0.55),
    ["glitter_density"] = 100,
    ["glitter_randomness"] = flakeRandomness,
    ["glitter_roughness_A"] = 0.1,
    ["glitter_size_A"] = 1.0/100,
    ["glitter_space"] = 4,
    ["show_specular"] = false,
    ["show_glitter"] = true,
    ["show_diffuse"] = false,
}

-- Color Copper(ish) with subtle hue/saturation variation
bottomcenter_mtl = DwaBaseMaterial("/Scene/surfacing/bottomcenter_left") {
    ["glitter_color_A"] = Rgb(0.55, 0.15, 0.05),
    ["glitter_color_hue_variation"] = 0.3,
    ["glitter_color_saturation_variation"] = 0.15,
    ["glitter_density"] = flakeDensity,
    ["glitter_randomness"] = flakeRandomness,
    ["glitter_roughness_A"] = 0.1,
    ["glitter_size_A"] = 1.0/flakeDensity,
    ["glitter_space"] = 4,
    ["show_specular"] = false,
    ["show_glitter"] = true,
    ["show_diffuse"] = false,
}

----------------------------------------------------------------------

-- Density 10^7
topright_mtl = DwaBaseMaterial("/Scene/surfacing/topright_mtl") {
    ["glitter_color_A"] = Rgb(0.55, 0.55, 0.55),
    ["glitter_density"] = 3162.28,
    ["glitter_randomness"] = flakeRandomness, 
    ["glitter_roughness_A"] = 0.1, 
    ["glitter_size_A"] = 1.0/3162.28,
    ["glitter_space"] = 4,
    ["show_specular"] = false,
    ["show_glitter"] = true,
    ["show_diffuse"] = false,
}

-- Flake Randomness 0.5
bottomright_mtl = DwaBaseMaterial("/Scene/surfacing/bottomright_mtl") {
    ["glitter_color_A"] = Rgb(0.55, 0.55, 0.55),
    ["glitter_density"] = 1000,
    ["glitter_randomness"] = 0.5,
    ["glitter_roughness_A"] = 0.1,
    ["glitter_size_A"] = 1.0/1000,
    ["glitter_space"] = 4,
    ["show_specular"] = false,
    ["show_glitter"] = true,
    ["show_diffuse"] = false,
}

----------------------------------------------------------

Layer("/Scene/rendering/organizer/perPartitionAssignments") {
    {sphere_topleft,      "", topleft_mtl,      lightset},
    {sphere_topcenter,    "", topcenter_mtl,    lightset},
    {sphere_topright,     "", topright_mtl,     lightset},
    {sphere_bottomleft,   "", bottomleft_mtl,   lightset},
    {sphere_bottomcenter, "", bottomcenter_mtl, lightset},
    {sphere_bottomright,  "", bottomright_mtl,  lightset},
}
