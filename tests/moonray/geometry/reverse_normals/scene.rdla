rats_assets_dir = os.getenv("RATS_ASSETS_DIR")

SceneVariables {
    ["image_width"] = 600,
    ["image_height"] = 100,
}

Camera("camera") {
    ["node_xform"] = translate(7.0, 0.0, 66.0),
}

key = RectLight("key") {
    ["node_xform"] = translate(0.0, 0.0, 100.0) *
                     rotate(-40, 1, 0, 0) *
                     rotate(-60, 0, 1, 0),
    ["intensity"] = 20.0,
    ["width"] = 100,
    ["height"] = 100,
}

sphereLight1 = SphereLight("sphereLight1") {
    ["node_xform"] = translate(22.0, 0.0, 0.0),
    ["intensity"] = 1.5,
    ["normalized"] = false,
}

sphereLight2 = SphereLight("sphereLight2") {
    ["node_xform"] = translate(29.0, 0.0, 0.0),
    ["intensity"] = 1.0,
    ["normalized"] = false,
}

lightSet = LightSet("lightSet") {
    key,
    sphereLight1,
    sphereLight2
}

tri1 = RdlMeshGeometry("tri1") {
    ["node_xform"] = scale(0.5, 0.5, 0.5) *
                     translate(-17.5, -2.5, 0.0),
    ["vertex_list"] = { Vec3( 0.0,  0.0,  0.0),
                        Vec3( 0.0, 10.0,  0.0),
                        Vec3(10.0, 10.0,  0.0),
                        Vec3(10.0,  0.0,  0.0), },
    ["vertices_by_index"] = { 0, 1, 2, 2, 3, 0 },
    ["face_vertex_count"] = { 3, 3 },
    ["uv_list"] = { Vec2(0.0, 0.0),
                    Vec2(0.0, 1.0),
                    Vec2(1.0, 1.0),
                    Vec2(1.0, 1.0),
                    Vec2(1.0, 0.0),
                    Vec2(0.0, 0.0), },
    ["side_type"] = "force single-sided",
    ["reverse_normals"] = true,
    ["smooth_normal"] = false,
    ["is_subd"] = false,
}

tri2 = RdlMeshGeometry("tri2") {
    ["node_xform"] = scale(0.5, 0.5, 0.5) *
                     translate(-10, -2.5, 0.0),
    ["vertex_list"] = { Vec3( 0.0,  0.0,  0.0),
                        Vec3( 0.0, 10.0,  0.0),
                        Vec3(10.0, 10.0,  0.0),
                        Vec3(10.0,  0.0,  0.0), },
    ["vertices_by_index"] = { 0, 1, 2, 2, 3, 0 },
    ["face_vertex_count"] = { 3, 3 },
    ["uv_list"] = { Vec2(0.0, 0.0),
                    Vec2(0.0, 1.0),
                    Vec2(1.0, 1.0),
                    Vec2(1.0, 1.0),
                    Vec2(1.0, 0.0),
                    Vec2(0.0, 0.0), },
    ["side_type"] = "force single-sided",
    ["reverse_normals"] = true,
    ["is_subd"] = true,
	["subd_resolution"] = 8,
}

pentagon = RdlMeshGeometry("pentagon") {
    ["node_xform"] = scale(0.4, 0.4, 0.4) *
                     translate(-2.0, -2.5, 0.0),
    ["vertex_list"] = { Vec3( 0.0,   0.0,  0.0),
                        Vec3( 0.0,  10.0,  0.0),
                        Vec3( 5.0,  15.0,  0.0),
                        Vec3(10.0,  10.0,  0.0),
                        Vec3(10.0,   0.0,  0.0), },
    ["vertices_by_index"] = { 0, 1, 2, 3, 4 },
    ["face_vertex_count"] = { 5 },
    ["uv_list"] = { Vec2(0.0, 0.0), 
                    Vec2(0.0, 0.66),
                    Vec2(0.5, 1.0),
                    Vec2(1.0, 0.66),
                    Vec2(1.0, 0.0), },
    ["normal_list"] = { Vec3(0.0, 0.0, -1.0),
                        Vec3(0.0, 0.0, -1.0),
                        Vec3(0.0, 0.0, -1.0),
                        Vec3(0.0, 0.0, -1.0),
                        Vec3(0.0, 0.0, -1.0) },
    ["side_type"] = "force single-sided",
    ["reverse_normals"] = true,
    ["is_subd"] = false,
}

quad1 = RdlMeshGeometry("quad1") {
    ["node_xform"] = scale(0.25, 0.25, 0.25) *
                     rotate(90.0, 0, 0, 1) *
                     rotate(20.0, 1, 0, 0) *
                     rotate(200.0, 0, 1, 0) *
                     translate(5.0, 1.0, 0.0),
    ["vertex_list"] = { Vec3(-10.0, 20.0, -2.0),
                        Vec3(-10.0,  0.0, -2.0),
                        Vec3(-10.0,  0.0, 20.0),
                        Vec3( 10.0,  0.0, 20.0),
                        Vec3( 10.0,  0.0, -2.0),
                        Vec3( 10.0, 20.0, -2.0), },
    ["vertices_by_index"] = {0, 1, 4, 5, 1, 2, 3, 4},
    ["face_vertex_count"] = {4, 4},
    ["uv_list"] = { Vec2(0.0, 1.0),
                    Vec2(0.0, 0.0),
                    Vec2(1.0, 0.0),
                    Vec2(1.0, 1.0),
                    Vec2(0.0, 0.0),
                    Vec2(0.0, 1.0),
                    Vec2(1.0, 1.0),
                    Vec2(1.0, 0.0), },
    ["side_type"] = "force single-sided",
    ["reverse_normals"] = true,
    ["is_subd"] = true,
	["subd_resolution"] = 8,
}

quad2 = RdlMeshGeometry("quad2") {
    ["node_xform"] = scale(0.25, 0.25, 0.25) *
                     rotate(90.0, 0, 0, 1) *
                     rotate(200.0, 0, 1, 0) *
                     translate(13.0, 0.0, 0.0),
    ["vertex_list"] = { Vec3(-10.0, 20.0, -2.0),
                        Vec3(-10.0,  0.0, -2.0),
                        Vec3(-10.0,  0.0, 20.0),
                        Vec3( 10.0,  0.0, 20.0),
                        Vec3( 10.0,  0.0, -2.0),
                        Vec3( 10.0, 20.0, -2.0), },
    ["vertices_by_index"] = {0, 1, 4, 5, 1, 2, 3, 4},
    ["face_vertex_count"] = {4, 4},
    ["side_type"] = "force single-sided",
    ["reverse_normals"] = true,
    ["is_subd"] = false,
    ["smooth_normal"] = false,
}

box = BoxGeometry("box") {
    ["node_xform"] = rotate(100.0, 0, 1, 0) *
                     rotate(20.0, 0, 0, 1) *
                     translate(22.0, 0.0, 0.0),
    ["size"] = Vec3(4.0, 4.0, 4.0),
    ["side_type"] = "force single-sided",
    ["reverse_normals"] = true;
}

sphere = SphereGeometry("sphere") {
    ["node_xform"] = rotate(60.0, 0, 1, 0) *
                     rotate(170.0, 1, 0, 0) *
                     rotate(20.0, 0, 0, 1) *
                     translate(29.0, 0.0, 0.0),
    ["radius"] = 3.0,
    ["zmin"] = -1.0,
    ["zmax"] = 2.8,
    ["phi_max"] = 250.0,
    ["side_type"] = "force single-sided",
    ["reverse_normals"] = true
}

GeometrySet("geometryset") {
    tri1,
    tri2,
    pentagon,
    quad1,
    quad2,
    box,
    sphere,
}

attrMap = AttributeMap("attrMap") {
    ["map_type"] = "texture st",
}

mtl = DwaSolidDielectricMaterial("mtl") {
    ["albedo"] = bind(attrMap, Rgb(1, 1, 1)),
    ["roughness"] = 0.25,
}

Layer("layer") {
    {tri1,     "", mtl, lightSet},
    {tri2,     "", mtl, lightSet},
    {pentagon, "", mtl, lightSet},
    {quad1,    "", mtl, lightSet},
    {quad2,    "", mtl, lightSet},
    {box,      "", mtl, lightSet},
    {sphere,   "", mtl, lightSet},
}
