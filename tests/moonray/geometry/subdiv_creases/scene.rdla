rats_assets_dir = os.getenv("RATS_ASSETS_DIR")

SceneVariables {
    ["image_width"] = 200,
    ["image_height"] = 150,
    ["pixel_samples"] = 2,
}

PerspectiveCamera("camera") {
    ["node_xform"] = translate(0, 0, 12) * rotate(-15, 1, 0, 0)
}

env = EnvLight("env") {
    ["intensity"] = 0.8,
    ["texture"] = rats_assets_dir .. "/hdri/parkinglot_dusk.exr",
}

key = RectLight("key") {
    ["node_xform"] = translate(0, 0, 100) * rotate(-60, 1, 0, 0) * rotate(-60, 0, 1, 0),
    ["intensity"] = 12,
    ["width"] = 50,
    ["height"] = 50,
}

lightSet = LightSet("lightSet") {
    env, key,
}

shapeCreases = RdlMeshGeometry("shape_creases") {
    ["node_xform"] = translate(-4, -2, 0),
    ["vertex_list"] = { Vec3(0, 0, 0), Vec3(0, 0, -1), Vec3(0, 0, -2),
                        Vec3(1, 2, 0), Vec3(1, 3, -1), Vec3(1, 4, -2),
                        Vec3(2, 0, 0), Vec3(2, 0, -1), Vec3(2, 0, -2),
                        Vec3(3, 2, 0), Vec3(3, 3, -1), Vec3(3, 4, -2),
                        Vec3(4, 0, 0), Vec3(4, 0, -1), Vec3(4, 0, -2),
                        Vec3(5, 2, 0), Vec3(5, 3, -1), Vec3(5, 4, -2),
                        Vec3(6, 0, 0), Vec3(6, 0, -1), Vec3(6, 0, -2),
                        Vec3(7, 2, 0), Vec3(7, 3, -1), Vec3(7, 4, -2),
                        Vec3(8, 0, 0), Vec3(8, 0, -1), Vec3(8, 0, -2) },
    ["vertices_by_index"] = { 0,  3,  4,  1,   1,  4,  5,  2,
                              3,  6,  7,  4,   4,  7,  8,  5,
                              6,  9, 10,  7,   7, 10, 11,  8,
                              9, 12, 13, 10,  10, 13, 14, 11,
                             12, 15, 16, 13,  13, 16, 17, 14,
                             15, 18, 19, 16,  16, 19, 20, 17,
                             18, 21, 22, 19,  19, 22, 23, 20,
                             21, 24, 25, 22,  22, 25, 26, 23},
    ["face_vertex_count"] = {4,4, 4,4, 4,4, 4,4, 4,4, 4,4, 4,4, 4,4},
    ["subd_crease_indices"] = { 3, 4,  4, 5,    9,10, 10,11,
                                   15,16, 16,17,   21,22, 22,23},
    ["subd_crease_sharpnesses"] = { 0.0,   0.0,     1.5,   1.5,
                                    3.0,   3.0,    10.0,  10.0},
    ["is_subd"] = true,
    ["subd_scheme"] = "catclark",
    ["subd_resolution"] = 20
}

GeometrySet("geomSet") {
   shapeCreases
}

mtl = DwaSolidDielectricMaterial("mtl") {
    ["albedo"] = Rgb(0.5, 0.5, 0.5),
    ["specular_model"] = 0,
}

Layer("layer") {
    {shapeCreases, "", mtl, lightSet},
}
